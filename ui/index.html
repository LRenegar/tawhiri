<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Matthew Judge, 2014 -->
    <title>Tawhiri</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"; charset="utf-8" />

    <link href="ext/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/base.css" rel="stylesheet" media="screen">
    <link href="ext/css/slider.css" rel="stylesheet" media="screen">
    <link href="ext/css/jquery.datetimepicker.css" rel="stylesheet" media="screen">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="ext/js/html5shiv.js"></script>
      <script src="ext/js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div id="main-wrap">
      <div class="tall" id="form-wrap" tabindex="0">
        <div class="formToggleVisible-wrap">
          <span class="formToggleVisible">
            <span class="toggle-bar toggle-bar-1"></span>
            <span class="toggle-bar toggle-bar-2"></span>
          </span>
        </div>
        <div id="form">
          <h3>Tawhiri</h3>
          <hr/>
          <div class="row">
            <div class="col-sm-12">
              <div class="input-group">
                <span class="input-group-btn">
                  <button class="btn btn-info" id="gps-locate" type="button"><span class="glyphicon glyphicon-record"></span></button>
                </span>
                <input class="form-control" type="text" id="pac-input" placeholder="Search for a place"/>
                <span class="input-group-btn">
                  <button class="btn btn-default" id="pac-input-submit" type="button"><span class="glyphicon glyphicon-search"></span></button>
                </span>
              </div><!-- /input-group -->
            </div>
          </div><!-- /.row -->
          <form class="form-horizontal" id="prediction-form" role="form">
            <input type="hidden" name="launchsite" value="Other"/>
            <input type="hidden" name="submit" value="Run Prediction"/>
            <h4>Launch parameters 
              <small class="text-right">
                <p class="text-right">Right click map to 
                  <button id="btn-set-position" class="btn btn-warning btn-xs" type="button" data-toggle="dropdown">set position</button>
                </p>
              </small>
            </h4>
            <div class="form-group">

            </div>
            <div class="form-group">
              <label for="inputLaunchLat" class="col-sm-3 control-label">Lat</label>
              <div class="col-sm-9">
                <input type="number" step="any" class="form-control" id="inputLaunchLat" name="launch_latitude" placeholder="" required="required">
              </div>
            </div>
            <div class="form-group">
              <label for="inputLaunchLong" class="col-sm-3 control-label">Long</label>
              <div class="col-sm-9">
                <input type="number" step="any" class="form-control" id="inputLaunchLong" name="launch_longitude" placeholder="" required="required">
              </div>
            </div>
            <div class="form-group ">
              <label for="inputLaunchAltitude" class="col-sm-3 control-label">Altitude</label>
              <div class="col-sm-9">
                <div class="input-group">
                  <input type="number" step="any" class="form-control" id="inputLaunchAltitude" name="launch_altitude" value="0" placeholder="" required="required">
                  <div class="input-group-btn unit-selection">       
                    <input type="hidden" name="unitLaunchAltitude" value="m"/>
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span id="unit-current-LaunchAltitude" class="unit-current">m</span> <span class="caret"></span></button>
                    <ul class="dropdown-menu pull-right">
                      <li><a href="#">m</a></li>
                      <li><a href="#">ft</a></li>
                    </ul>
                  </div><!-- /btn-group -->
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="dateTimePicker" class="col-sm-3 control-label">Date</label>
              <div class="col-sm-9">
                <div class="form-control" id="displayLaunchDate"></div>
              </div>
              <div id="dateTimePicker-wrapper" class="col-sm-12 collapse in">
                <input id="dateTimePicker"/>
              </div>
            </div>
            <div class="form-group">
              <label for="inputLaunchHour" class="col-sm-3 control-label">Time</label>
              <div class="col-sm-9">
                <div class="row">
                  <div class="col-sm-6">
                    <select id="inputLaunchHour" name="launch_datetime_hour" class="form-control" required="required">
                      <option value="00">00</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="04">04</option>
                      <option value="05">05</option>
                      <option value="06">06</option>
                      <option value="07">07</option>
                      <option value="08">08</option>
                      <option value="09">09</option>
                      <option value="10">10</option>
                      <option value="11">11</option>
                      <option value="12">12</option>
                      <option value="13">13</option>
                      <option value="14">14</option>
                      <option value="15">15</option>
                      <option value="16">16</option>
                      <option value="17">17</option>
                      <option value="18">18</option>
                      <option value="19">19</option>
                      <option value="20">20</option>
                      <option value="21">21</option>
                      <option value="22">22</option>
                      <option value="23">23</option>
                    </select>
                  </div>
                  <div class="col-sm-6">
                    <select id="inputLaunchMinute" name="launch_datetime_min" class="form-control" required="required">
                      <option value="00">00</option>
                      <option value="05">05</option>
                      <option value="10">10</option>
                      <option value="15">15</option>
                      <option value="20">20</option>
                      <option value="25">25</option>
                      <option value="30">30</option>
                      <option value="35">35</option>
                      <option value="40">40</option>
                      <option value="45">45</option>
                      <option value="50">50</option>
                      <option value="55">55</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-offset-3 col-sm-9" id="launchDatetimeUTCPreview"></div>
            </div>

            <div>
              <h4>Simulation Parameters</h4>
              <div class="form-group ">
                <label for="predictionMode" class="col-sm-6 control-label">Prediction Mode</label>
                <div class="col-sm-6">
                  <div class="input-group">
                    <select class="form-control" id="predictionMode" name="prediction_mode" required="required">
                      <option value="simple">Simple</option>
                      <option value="hourly">Hourly</option>
                      <option value="monteCarlo">Monte Carlo</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="physicsModel" class="col-sm-6 control-label">Physics Model</label>
                <div class="col-sm-6">
                  <div class="input-group">
                    <select class="form-control" id="physicsModel" name="physics_model" required="required">
                      <option value="CUSF">CUSF</option>
                      <option value="UMDBPP">UMDBPP</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="form-group" id="number-runs" hidden="hidden">
                <label for="selectNumberRuns" class="col-sm-6 control-label" id="selectNumberRunsLabel">Prediction Runs</label>
                <div class="col-sm-4">
                  <select class="form-control" id="selectNumberRuns" name="number_runs" required="required">
                    <option value="1" selected="selected">1</option>
                    <option value="12">12</option>
                    <option value="24">24</option>
                    <option value="36">36</option>
                    <option value="48">48</option>
                    <option value="72">72</option>
                    <option value="80">80</option>
                    <option value="100">100</option>
                    <option value="180">180</option>
                  </select>
                </div>
              </div>
            </div>

            <div>
              <h4>System Parameters</h4>
              <div id="divCUSFModelOnlyParams">
                <div class="form-group " id="divAscentRate">
                <label for="inputLaunchAscentRate" class="col-sm-6 control-label">Ascent Rate</label>
                <div class="col-sm-6">
                  <div class="input-group">
                    <input type="number" step="any" min="0" class="form-control" id="inputLaunchAscentRate" name="ascent_rate" value="5" placeholder="" required="required">
                    <div class="input-group-btn unit-selection">
                      <input type="hidden" name="unitLaunchAscentRate" value="m/s"/>
                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="unit-current">m/s</span> <span class="caret"></span></button>
                      <ul class="dropdown-menu pull-right">
                        <li><a href="#">m/s</a></li>
                        <li><a href="#">ft/s</a></li>
                      </ul>
                    </div><!-- /btn-group -->
                  </div>
                </div>
              </div>
              </div>
              <div>
                <div class="form-group " id="divBurstAlt">
                  <label for="inputLaunchBurstAlt" class="col-sm-5 control-label">Burst Alt</label>
                  <div class="col-sm-7">
                    <div class="input-group">
                      <input type="number" step="any" class="form-control" id="inputLaunchBurstAlt" name="burst_altitude" value="30000" placeholder="" required="required">
                      <div class="input-group-btn unit-selection">
                        <input type="hidden" name="unitLaunchBurstAlt" value="m"/>
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="unit-current">m</span> <span class="caret"></span></button>
                        <ul class="dropdown-menu pull-right">
                          <li><a href="#">m</a></li>
                          <li><a href="#">ft</a></li>
                        </ul>
                      </div><!-- /btn-group -->
                    </div>
                  </div>
                </div>
                <div class="form-group " id="divDescentRate">
                  <label for="inputLaunchDescentRate" class="col-sm-6 control-label">Descent Rate</label>
                  <div class="col-sm-6">
                    <div class="input-group">
                      <input type="number" step="any" min="0" class="form-control" id="inputLaunchDescentRate" name="descent_rate" value="5" placeholder="" required="required">
                      <div class="input-group-btn unit-selection">
                        <input type="hidden" name="unitLaunchDescentRate" value="m/s"/>
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="unit-current">m/s</span> <span class="caret"></span></button>
                        <ul class="dropdown-menu pull-right">
                          <li><a href="#">m/s</a></li>
                          <li><a href="#">ft/s</a></li>
                        </ul>
                      </div><!-- /btn-group -->
                    </div>
                  </div>
                </div>
              </div>
              <div id="divUMDBPPModelOnlyParams">
                <div class="form-group " id="divHeliumMass">
                  <label for="inputHeliumMass" class="col-sm-6 control-label">Helium Mass</label>
                  <div class="col-sm-6">
                    <div class="input-group">
                      <input type="number" step="any" min="0" class="form-control" id="inputHeliumMass" name="helium_mass" value="5" placeholder="" required="required">
                      <div class="input-group-btn unit-selection">
                        <input type="hidden" name="unitHeliumMass" value="m/s"/>
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="unit-current">kg</span> <span class="caret"></span></button>
                        <ul class="dropdown-menu pull-right">
                          <li><a href="#">kg</a></li>
                          <li><a href="#">lbm</a></li>
                        </ul>
                      </div><!-- /btn-group -->
                    </div>
                  </div>
                </div>
                <div class="form-group " id="divPayloadMass">
                <label for="inputPayloadMass" class="col-sm-6 control-label">Payload Mass</label>
                <div class="col-sm-6">
                  <div class="input-group">
                    <input type="number" step="any" min="0" class="form-control" id="inputPayloadMass" name="payload_mass" value="10" placeholder="" required="required">
                    <div class="input-group-btn unit-selection">
                      <input type="hidden" name="unitPayloadMass" value="m/s"/>
                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="unit-current">kg</span> <span class="caret"></span></button>
                      <ul class="dropdown-menu pull-right">
                        <li><a href="#">kg</a></li>
                        <li><a href="#">lbm</a></li>
                      </ul>
                    </div><!-- /btn-group -->
                  </div>
                </div>
              </div>
                <div class="form-group " id="divBalloonMass">
                <label for="inputBalloonMass" class="col-sm-6 control-label">Balloon Mass</label>
                <div class="col-sm-6">
                  <div class="input-group">
                    <input type="number" step="any" min="0" class="form-control" id="inputBalloonMass" name="balloon_mass" value="10" placeholder="" required="required">
                    <div class="input-group-btn unit-selection">
                      <input type="hidden" name="unitBalloonMass" value="m/s"/>
                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="unit-current">kg</span> <span class="caret"></span></button>
                      <ul class="dropdown-menu pull-right">
                        <li><a href="#">kg</a></li>
                        <li><a href="#">lbm</a></li>
                      </ul>
                    </div><!-- /btn-group -->
                  </div>
                </div>
              </div>
              </div>
            </div>

            <div hidden="true" id="divMonteCarloParams">
              <h4>Monte Carlo Parameters</h4>
              <div class="form-group ">
                <label for="inputBurstAltParam" class="col-sm-6 control-label">Burst Alt Std. Deviation</label>
                <div class="col-sm-6">
                  <div class="input-group">
                    <input type="number" step="any" min="0" class="form-control" id="inputBurstAltParam" name="burst_alt_param" value="0.1" placeholder="" required="required">
                    <div class="input-group-btn unit-selection">
                      <input type="hidden" name="unitBurstAltParam" value="m"/>
                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="unit-current">m</span> <span class="caret"></span></button>
                      <ul class="dropdown-menu pull-right">
                        <li><a href="#">m</a></li>
                        <li><a href="#">ft</a></li>
                      </ul>
                    </div><!-- /btn-group -->
                  </div>
                </div>
              </div>

              <div class="form-group ">
                <label for="inputAscentRateParam" class="col-sm-6 control-label">Ascent Rate Std. Deviation</label>
                <div class="col-sm-6">
                  <div class="input-group">
                    <input type="number" step="any" min="0" class="form-control" id="inputAscentRateParam" name="ascent_rate_param" value="0.1" placeholder="" required="required">
                    <div class="input-group-btn unit-selection">
                      <input type="hidden" name="unitAscentRateParam" value="m/s"/>
                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="unit-current">m/s</span> <span class="caret"></span></button>
                      <ul class="dropdown-menu pull-right">
                        <li><a href="#">m/s</a></li>
                        <li><a href="#">ft/s</a></li>
                      </ul>
                    </div><!-- /btn-group -->
                  </div>
                </div>
              </div>

              <div class="form-group ">
                <label for="inputDescentRateParam" class="col-sm-6 control-label">Descent Rate Std. Deviation</label>
                <div class="col-sm-6">
                  <div class="input-group">
                    <input type="number" step="any" min="0" class="form-control" id="inputDescentRateParam" name="descent_rate_param" value="0.1" placeholder="" required="required">
                    <div class="input-group-btn unit-selection">
                      <input type="hidden" name="unitDescentRateParam" value="m/s"/>
                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="unit-current">m/s</span> <span class="caret"></span></button>
                      <ul class="dropdown-menu pull-right">
                        <li><a href="#">m/s</a></li>
                        <li><a href="#">ft/s</a></li>
                      </ul>
                    </div><!-- /btn-group -->
                  </div>
                </div>
              </div>
              <div class="form-group ">
                <label for="inputWindParam" class="col-sm-6 control-label">Wind Parameter</label>
                <div class="col-sm-6">
                  <div class="input-group">
                    <input type="number" step="any" min="0" class="form-control" id="inputWindParam" name="wind_param" value="0.1" placeholder="" required="required">
                  </div>
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="col-sm-4">
                <button type="submit" class="btn btn-success">Predict</button>
              </div>
              <div class="col-sm-4">
                <button type="button" class="btn" id="btnToggleHeatmap">Toggle Heatmap</button>
              </div>
            </div>

            <div class="form-group"> <!--Padding to keep unit dropdown from overunning the page-->
            </div>
          </form>
        </div>
      </div>

      <div class="tall" id="map-wrap">
        <div id="wrapper"></div>
        <div id="progress-bar-wrapper">
          <div class="progress">
            <div class="progress-bar progress-bar-success" role="progressbar">
            </div>
          </div>
        </div>
        <div id="hourly-time-slider-container" data-toggle="popover" 
             data-placement="left" 
             data-content="Select a time to show corrosponding path">        
        </div>
        <pre id="current-launch-info-container"></pre>
        <div class="map-canvas" tabindex="-1"></div>
      </div>
      <div id="debug"></div>
    </div>
    <div id="notification-area">
      <div id="current-notifications"></div>
    </div>

    <script src="ext/js/jquery-1.10.2.min.js"></script>
    <script src="ext/js/bootstrap.min.js"></script>
    <script src="ext/js/modernizr.custom.21490.js"></script>
    <script src="ext/js/bootstrap-slider.js"></script>
    <script src="ext/js/jquery.datetimepicker.js"></script>

    <!-- google maps -->
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?libraries=places&key=TODO_INSERT_KEY_HERE">
    </script>

    <script src="js/util.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/predictions.js"></script>
    <script src="js/cusf_tawhiri_ui.js"></script>
  </body>
</html>
